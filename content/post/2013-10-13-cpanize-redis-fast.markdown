---
layout: post
title: "Redis::Fastをcpanize＆アップデートしました"
date: 2013-10-13T22:39:00+09:00
comments: true
categories: [redis, perl]
---

Redis::Fastを[cpanizeしました！](https://metacpan.org/release/Redis-Fast)

さらに！早速不具合が見つかったので0.01から0.02にアップデートしました！

<!-- More -->

CPANに上げてから24時間も経たないうちにpull requestがやってきてCPAN怖いところです。

最初のバージョンである0.01ではタイムアウト処理をちゃんと書いていなかったので、
タイムアウト時に無限ループに陥る不具合がありました。
LinuxとMacとでコネクションを張るのに失敗したときの挙動が違うらしく、
Linuxでは問題なくテストが通るのに、Mac上でのテストでは再現するという面倒バグでした。
さらに面倒なことにRedisの起動のタイミングによって、
Macでもテストが通ったり通らなかったりするという・・・。

主に開発はLinux上でやって、Linux上でしかテスト動かしてなかったので全く気がついていませんでした。
CPANデビューのモジュールがネットワーク関連でXSで少しハードルを上げ過ぎた感じがします。
環境依存な部分が多くてつらいです。

pull requestを送ってくださったsyohexさん、実際にインストールを試みてテストが通らないことを教えてくださったみなさん、ありがとうございました。
アップデートした0.02では、タイムアウト時の処理を少し書きなおして、pull requestも取り込みました。
Mac上でも問題なくテストが通ってインストールできるはずです(きっとね)。
