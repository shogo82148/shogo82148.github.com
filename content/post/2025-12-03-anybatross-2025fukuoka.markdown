---
layout: post
title: "„Ç≥„Éº„Éâ„Ç¥„É´„Éï„Ç≥„É≥„ÉÜ„Çπ„Éà Anybatross YAPC::Fukuoka 2025 „Å´ÂèÇÂä†„Åó„Åü"
slug: anybatross-2025fukuoka
date: 2025-12-03 00:20:00 +0900
comments: true
categories: [perl]
---

„Åì„ÅÆË®ò‰∫ã„ÅØ„ÄÅ[Perl Advent Calendar 2025](https://qiita.com/advent-calendar/2025/perl) 4Êó•ÁõÆ„ÅÆË®ò‰∫ã„Åß„Åô„ÄÇ 3Êó•ÁõÆ„ÅØ[id:hkoba501](https://profile.hatena.ne.jp/hkoba501/)„Åß„Äå[Claude Code „ÅØ OO Modulino Ôºà„Ç™„Ç•„Ç™„Ç•„Éª„É¢„Ç∏„É•„É™„Éº„ÉéÔºâ„ÇÇÁêÜËß£„Åó„Å¶„Åè„Çå„Çã„ÄÅ„ÅΩ„ÅÑÔºÅ](https://hkoba.hatenablog.com/entry/2025/12/02/000000)„Äç„Åß„Åó„Åü„ÄÇ

-----

YAPC::Fukuoka 2025 „ÅÆ‰ΩôËàà„Åß[„Ç≥„Éº„Éâ„Ç¥„É´„Éï](https://ja.wikipedia.org/wiki/%E3%82%B3%E3%83%BC%E3%83%89%E3%82%B4%E3%83%AB%E3%83%95)„Ç≥„É≥„ÉÜ„Çπ„Éà„ÅåÈñãÂÇ¨„Åï„Çå„Åæ„Åó„Åü„ÄÇ

- [„Ç≥„Éº„Éâ„Ç¥„É´„Éï„Ç≥„É≥„ÉÜ„Çπ„Éà Anybatross YAPC::Fukuoka 2025 ÈñãÂÇ¨„ÅÆ„ÅäÁü•„Çâ„Åõ](https://techblog.kayac.com/anybatross-yapc2025fukuoka)
- [~~Perl~~Anybatross YAPC::Fukuoka 2025](https://perlbatross.kayac.com/contest/2025fukuoka)

„Ç≥„Éº„Éâ„Ç¥„É´„Éï„Å®„ÅØ„ÄÅ‰∏é„Åà„Çâ„Çå„Åü‰ªïÊßò„Å´ÂØæ„Åó„Å¶„Åß„Åç„ÇãÈôê„ÇäÁü≠„ÅÑ„ÇΩ„Éº„Çπ„Ç≥„Éº„Éâ„ÅßËß£Á≠î„Åô„Çã„Å®„ÅÑ„ÅÜ„Ç≤„Éº„É†„Åß„Åô„ÄÇ
‰ªäÂõû„ÅØPerl„ÄÅRuby„ÄÅPython„ÄÅJavaScript„ÄÅPHP„Å™„Å©„ÅßÂèÇÂä†ÂèØËÉΩ„Åß„Åô„Åå„ÄÅ~~Perl Advent Calendar„ÅÆ„Éç„Çø„ÅÆ„Åü„ÇÅ„Å´„ÄÅ~~„ÄÄÂÄã‰∫∫ÁöÑ„Å´‰∏ÄÁï™È¶¥Êüì„ÅøÊ∑±„ÅÑPerl„Çí‰Ωø„Å£„Å¶ÂèÇÂä†„Åó„Åæ„Åó„Åü„ÄÇ
ÁµêÊûú„ÄÅ„Åô„Åπ„Å¶„ÅÆÂïèÈ°å„ÇíPerl„Åß„ÉÅ„É£„É¨„É≥„Ç∏„Åó„Åü‰∫∫„ÅÆ‰∏≠„Åß„ÅØ2‰Ωç„Å´„Å™„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åó„Åü„ÄÇ

## Hole 1

> „Ç¢„É´„Éï„Ç°„Éô„ÉÉ„Éà„ÅÆA„ÇÑB„Å´„ÅÇ„Çã„Çà„ÅÜ„Å™„ÄÅÊñáÂ≠ó„ÅÆ‰∏≠„Å´„ÅÇ„ÇãÈñâ„Åò„ÅüÁ©∫Èñì„ÅÆ„Åì„Å®„Çí„Ç´„Ç¶„É≥„Çø„Éº„Å®„ÅÑ„ÅÑ„Åæ„Åô„ÄÇ
>
> 0„Äú9„Åæ„Åß„ÅÆ10Á®Æ„Å®„ÄÅ„Ç¢„É´„Éï„Ç°„Éô„ÉÉ„ÉàÂ§ßÊñáÂ≠ó„ÅÆA„ÄúZ„ÅÆ26Á®Æ„ÄÅÂêàË®à36Á®Æ„ÅÆÊñáÂ≠ó„ÇÑ„Åù„ÅÆ‰ªñ„ÅÆË®òÂè∑„ÇíÂà©Áî®„Åó„ÅüÊñáÂ≠óÂàó„ÅåÊ∏°„Åï„Çå„Çã„ÅÆ„Åß„ÄÅ„Ç´„Ç¶„É≥„Çø„Éº„ÅÆÊï∞„ÇíÊï∞„Åà„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ„Ç¢„É´„Éï„Ç°„Éô„ÉÉ„ÉàÂ∞èÊñáÂ≠ó„ÅØÊù•„Åæ„Åõ„Çì„ÄÇ„Åù„ÅÆ‰ªñ„ÅÆË®òÂè∑„ÅÆ„Ç´„Ç¶„É≥„Çø„Éº„ÅØÊï∞„Åà„Å™„Åè„Å¶„Çà„ÅÑ„Åß„Åô„ÄÇ
>
> 1Ë°å„Åö„Å§Êï∞„Åà„Å¶„ÄÅ„Åù„ÅÆË°å„Åæ„Åß„ÅÆÁ¥ØÁ©çÂÄãÊï∞„Å®„ÄÅ„Åù„ÅÆË°å„Åß„ÅÆÂá∫ÁèæÂÄãÊï∞„ÇíÂá∫Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ
>
> - <https://perlbatross.kayac.com/contest/2025fukuoka/challenge/1/sample>

„Çµ„É≥„Éó„É´„ÅÆ„Ç≥„Éº„Éâ„ÅåÊèê‰æõ„Åï„Çå„Å¶„ÅÑ„Çã„ÅÆ„Åß„ÄÅ„Åæ„Åö„ÅØ„Åì„Åì„Åã„ÇâÂßã„ÇÅ„Å¶„ÅÑ„Åç„Åæ„Åó„Çá„ÅÜ„ÄÇ

> [Score: +1065](https://perlbatross.kayac.com/contest/2025fukuoka/challenge/1/01K9P8RR8BP9WVVXVFMAS6D554)

```perl
use v5.40;
use utf8;

our $COUNTER_MAP = {
    '0' => 1,
    '1' => 0,
    '2' => 0,
    '3' => 0,
    '4' => 1,
    '5' => 0,
    '6' => 1,
    '7' => 0,
    '8' => 2,
    '9' => 1,
    'A' => 1,
    'B' => 2,
    'C' => 0,
    'D' => 1,
    'E' => 0,
    'F' => 0,
    'G' => 0,
    'H' => 0,
    'I' => 0,
    'J' => 0,
    'K' => 0,
    'L' => 0,
    'M' => 0,
    'N' => 0,
    'O' => 1,
    'P' => 1,
    'Q' => 1,
    'R' => 1,
    'S' => 0,
    'T' => 0,
    'U' => 0,
    'V' => 0,
    'W' => 0,
    'X' => 0,
    'Y' => 0,
    'Z' => 0,
};

my $input = do { local $/; <STDIN> };
my @lines = split /\n/, $input;

my @results;
my $accumulated_count = 0;
# Ë°å„Åî„Å®„Å´Âá¶ÁêÜ„Åô„Çã
for my $line_num (0..scalar(@lines)-1) {
    # 1Ë°å„Çí1ÊñáÂ≠ó„Åö„Å§ÂàÜÂâ≤
    my @chars = split //, $lines[$line_num];

    # 1ÊñáÂ≠ó„Åö„Å§„Ç´„Ç¶„É≥„Çø„Éº„ÅÆÊï∞„ÇíÂêàË®à
    my $total_count = 0;
    for my $char (@chars) {
        $total_count += $COUNTER_MAP->{$char} // 0;
    }

    $accumulated_count += $total_count;
    push @results, $accumulated_count . ',' . $total_count;
}

for my $result (@results) {
    print $result;
    # 1Ë°å„Åî„Å®„Å´ÊîπË°å
    print "\n";
}
```

„Åì„Åì„Åã„ÇâÂÖ®‰Ωì„ÅÆÊßãÊàê„Çí„Å™„Çã„Åπ„ÅèÂ§â„Åà„Å™„ÅÑ„Çà„ÅÜ„Å´Â∞ë„Åó„Åö„Å§Ââä„Å£„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇ

- Â§âÊï∞Âêç„Å´‰∏ÄÊñáÂ≠óÂ§âÊï∞Âêç„ÇíÊé°Áî®„Åô„Çã„ÄÇ
- ‰∏ÄÂ∫¶„Åó„Åã‰ª£ÂÖ•„Åó„Å¶„ÅÑ„Å™„ÅÑÂ§âÊï∞„ÅØÂâä„Çã„ÄÇ
- `$COUNTER_MAP` „ÅÆ0„ÅÆË¶ÅÁ¥†„ÅØ‰∏çË¶Å„Å™„ÅÆ„ÅßÂâä„Çã„ÄÇ
- ÁâπÊÆäÂ§âÊï∞ `$_` „Çí‰Ωø„ÅÜ„ÄÇ

„Åô„Çã„Å®‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åô„ÄÇ
ÔºàË™≠„Åø„ÇÑ„Åô„ÅÑ„Çà„ÅÜÊîπË°å„Å†„ÅëË£ú„ÅÑ„Åæ„Åó„ÅüÔºâ

> [Score: +7](https://perlbatross.kayac.com/contest/2025fukuoka/challenge/1/01K9PF27B9NSWBCAQRWM8VKJYC)

```perl
%M=(split//,'0141618291A1B2D1O1P1Q1R1');
$a=0;
for(<>){
  $b=0;
  $b+=$M{$_}//0 for(split//);
  $a+=$b;
  print"$a,$b\n"
}
```

- „Çà„Åè„Çà„ÅèË¶ã„Å¶„Åø„Çã„Å®`$COUNTER_MAP`„ÇÇ‰∏ÄÂ∫¶„Åó„Åã‰Ωø„Çè„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇÂ§âÊï∞„Å´‰ª£ÂÖ•„Åô„Çã„ÅÆ„ÅØ„É†„ÉÄ„Å™„ÅÆ„ÅßÂâä„Çä„Åæ„Åô„ÄÇ
- `undef` „ÅØÊï∞ÂÄ§„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„Åß„ÅØ0„Å®Ë©ï‰æ°„Åï„Çå„Çã„ÅÆ„Åß `$b+=$M{$_}//0` „ÅÆ `//0` „ÅØ‰∏çË¶Å„Åß„Åô„ÄÇ

> [Score: -2](https://perlbatross.kayac.com/contest/2025fukuoka/challenge/1/01K9PHV59PP1ZTB0FDPR4H0PXX)

```perl
$a=0;
for(<>){
  $b=0;
  $b+={split//,'0141618291A1B2D1O1P1Q1R1'}->{$_}for split//;
  $a+=$b;
  print"$a,$b\n"
}
```

„Åì„Åì„Åæ„Åß„Å®„Çä„ÅÇ„Åà„Åö„Éë„Éº„ÅØÈÅîÊàê„Åß„Åô„ÄÇ
„ÇÇ„ÅÜÊï∞„Éê„Ç§„Éà„Åß„ÅÇ„Çå„Å∞Ââä„Çå„Åù„ÅÜ„Åß„Åô„Åå„ÄÅ‰ªä„ÅÆ„Åæ„Åæ„ÅÆ„Ç¢„É´„Ç¥„É™„Ç∫„É†„Åß„ÅØÈôêÁïå„ÅåË¶ã„Åà„Å¶„Åç„Åæ„Åó„Åü„ÄÇ

„Åù„Åì„Åß„Å°„Çá„Å£„Å®Ë¶ã„Åã„Åü„ÇíÂ§â„Åà„Å¶„Åø„Åæ„Åô„ÄÇ
`split`„Åó„Å¶‰∏ÄÊñáÂ≠ó„Åî„Å®„Å´„Ç´„Ç¶„É≥„Éà„Åó„Å¶„Åç„Åæ„Åó„Åü„Åå„ÄÅÊúÄÁµÇÁöÑ„Å´ÂøÖË¶Å„Å™„ÅÆ„ÅØ„Ç´„Ç¶„É≥„Çø„Éº„ÅÆÂêàË®à„Åß„Åô„ÄÇ
ÂêàË®à„ÇíÁÆóÂá∫„Åô„Çã„Å†„Åë„Å™„ÇâÂêÑÊñáÂ≠ó„ÅÆÂá∫ÁèæÂõûÊï∞„ÅåÂàÜ„Åã„Çå„Å∞ÂçÅÂàÜ„Åß„Åô„ÄÇ
[Perl„ÅßÊñáÂ≠óÂàó„ÅÆÂá∫ÁèæÂõûÊï∞„ÇíË™ø„Åπ„Çã](https://shogo82148.github.io/blog/2015/04/09/count-substrings-in-perl/) „ÅßÁôªÂ†¥„Åó„Åü[ÁîªÂÉèÊ§úÁ¥¢„Åó„Å¶„ÅØ„ÅÑ„Åë„Å™„ÅÑÊºîÁÆóÂ≠ê](https://metacpan.org/dist/perlsecret/view/lib/perlsecret.pod#Goatse)„Çí‰Ωø„Åà„Å∞‰∏ÄÁô∫„Åß„Åô„Å≠„ÄÇ

> [Score: -43](https://perlbatross.kayac.com/contest/2025fukuoka/challenge/1/01K9Q0501KN0QQJZ3V91N9NND7)

```perl
$a+=$b=()=(/[04689ABDO-R]/g,/[8B]/g),print"$a,$b\n"for<>;
```

„Å†„ÅÑ„Å∂Áü≠„Åè„Å™„Çä„Åæ„Åó„Åü„Åå„ÄÅ„É™„Çπ„Éà„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„Å®„Çπ„Ç´„É©„Éº„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„ÇíË°å„ÅçÊù•„Åô„ÇãÂàÜ„ÄÅ
Ëã•Âπ≤„É†„ÉÄ„ÅåÂ§ö„ÅÑ„Çà„ÅÜ„Å´Ë¶ã„Åà„Åæ„Åô„ÄÇ

„Äå„Çπ„Ç´„É©„Éº„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„ÅßË©ï‰æ°„Åó„Åü„ÇâÂá∫ÁèæÂõûÊï∞„ÇíËøî„Åó„Å¶„Åè„Çå„Çã‰æøÂà©„Å™ÊºîÁÆóÂ≠ê„Å™„ÅÑ„Åã„Å™„Äç„Å®perldoc„ÇíÂΩ∑Âæ®„Å£„Å¶„ÅÑ„Åü„Å®„Åì„Çç `s///` ÊºîÁÆóÂ≠ê„Å´Ë°å„ÅçÁùÄ„Åç„Åæ„Åó„Åü„ÄÇ
`s///` „ÅØÁΩÆÊèõ„ÇíË°å„ÅÜÈöõ„Å´‰Ωø„ÅÜÊºîÁÆóÂ≠ê„Åß„Åô„Åå„ÄÅË©ï‰æ°ÁµêÊûú„Å®„Åó„Å¶ÁΩÆÊèõ„Åó„ÅüÂõûÊï∞„ÇíËøî„Åó„Åæ„Åô„ÄÇ

> [Score: -45](https://perlbatross.kayac.com/contest/2025fukuoka/challenge/1/01K9W2XYF6SFA9SPJZY1SMTWWA)

```perl
print$a+=$b=s/[8B]/0/g+s/[04689ABDO-R]//g,",$b\n"for<>
```

„Åï„Çâ„Å´ perldoc „ÇíÂΩ∑Âæ®„Å£„Å¶„ÄÅ`y///` ÊºîÁÆóÂ≠ê„Çí‰Ωø„ÅÜ„Å®ÂêåÁ≠â„ÅÆÂá¶ÁêÜ„Çí„ÇÇ„Å£„Å®Áü≠„ÅèÊõ∏„Åë„Çã„Åì„Å®„Å´Ê∞ó„Åå‰ªò„Åç„Åæ„Åó„Åü„ÄÇ`y///` ÊºîÁÆóÂ≠ê„ÇÇÁΩÆÊèõ„ÇíË°å„Å£„Åü„ÅÇ„Å®„ÄÅË©ï‰æ°ÁµêÊûú„Å®„Åó„Å¶ÁΩÆÊèõ„Åó„ÅüÂõûÊï∞„ÇíËøî„Åó„Åæ„Åô„ÄÇ

> [Score: -54](https://perlbatross.kayac.com/contest/2025fukuoka/challenge/1/01K9XV7DDMEXM2MBXZS1SARJKS)

```perl
print$a+=$b=y/8B/0/+y/0469ADO-R//,",$b\n"for<>
```

[yamamoto „Åï„Çì„ÅÆËß£Á≠î](https://perlbatross.kayac.com/contest/2025fukuoka/challenge/1/01K9WZ30XVCANH9CZPD7A8VESR) „ÇíË¶ã„Å¶Ê∞ó„Åå„Å§„ÅÑ„Åü„ÅÆ„Åß„Åô„Åå„ÄÅ `""` „ÅÆ‰∏≠„Å´Áõ¥Êé•ÊîπË°å„Å£„Å¶Êõ∏„Åë„Çã„Çì„Åß„Åô„Å≠„ÄÇ`\n` „ÇíÊîπË°å„Å´ÁΩÆ„ÅçÊèõ„Åà„Å¶ -1 „Éê„Ç§„Éà„Åß„Åô„ÄÇ

> [Score: -55](https://perlbatross.kayac.com/contest/2025fukuoka/challenge/1/01K9XVJQPG4JBAZAKRSNAFNN8Y)

```perl
print$a+=$b=y/8B/0/+y/0469ADO-R//,",$b
"for<>
```


## Hole 2

> „Ç¢„É´„Éï„Ç°„Éô„ÉÉ„ÉàÂ∞èÊñáÂ≠ó„Å®ÂçäËßí„Çπ„Éö„Éº„Çπ„ÇíÁî®„ÅÑ„Å¶ÂàÜ„Åã„Å°Êõ∏„Åç„Åï„Çå„Åü„ÉÜ„Ç≠„Çπ„Éà„ÅåÊ®ôÊ∫ñÂÖ•Âäõ„Åß‰∏é„Åà„Çâ„Çå„Åæ„Åô„ÄÇ„Åì„ÅÆ„ÉÜ„Ç≠„Çπ„Éà„Çí‰ª•‰∏ã„ÅÆ„É´„Éº„É´„Å´Âæì„Å£„Å¶ÂúßÁ∏Æ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ
>
> - <https://perlbatross.kayac.com/contest/2025fukuoka/challenge/2/sample>

Hole 2„ÇÇ„Åæ„Åö„ÅØ„Çµ„É≥„Éó„É´„Ç≥„Éº„Éâ„ÇíÈÄö„Åó„Å¶„É©„É≥„Ç≠„É≥„Ç∞„Å´Ëºâ„Çã„Å®„Åì„Çç„Åã„Çâ„Çπ„Çø„Éº„Éà„Åß„Åô„ÄÇ

> [Score: +2798](https://perlbatross.kayac.com/contest/2025fukuoka/challenge/2/01K9P8TVGJ3M0BQBAM0X0EQXCR)

```perl
use v5.40;
use utf8;
use Encode qw/encode_utf8 decode_utf8/;

# Ê®ôÊ∫ñÂÖ•Âäõ„ÅÆ„Åô„Åπ„Å¶„ÅÆË°å„ÇíÊúÄÂæå„Åæ„ÅßÂèñ„ÇäËæº„Åø
my $input = do { local $/; <STDIN> };
# ËæûÊõ∏Âá∫ÂäõÁî®Â§âÊï∞
my %dict = ();
# Êú´Â∞æÊîπË°å„ÇíÂâäÈô§
chomp $input;
# utf8„ÅÆÂÜÖÈÉ®ÂΩ¢Âºè„Å´Â§âÊèõ ÊñáÂ≠óÂçò‰Ωç„Åß„ÅÆÂàÜÂâ≤„Çíutf8„ÅÆÂü∫Ê∫ñ„ÅßË°å„ÅÜ„Åü„ÇÅ
$input = decode_utf8($input);
while (true) {
    # Á©∫ÁôΩÂå∫Âàá„Çä„ÅÆÂçòË™ûÂçò‰Ωç„ÅßÂàÜÂâ≤
    my @words = split / /, $input;

    my @bigrams;
    # ÂçòË™û„Åî„Å®„Å´Âá¶ÁêÜ
    for my $word (@words) {
        # bigram„Çí‰ΩúÊàê
        my @chars = split //, $word;
        for my $i (0...scalar(@chars) - 2) {
            push @bigrams, $chars[$i] . $chars[$i + 1];
        }
    }
    # bigram„ÅÆÂá∫ÁèæÈ†ªÂ∫¶„ÇíË®àÁÆó
    # Âá∫Áèæ„Åô„ÇãÈ†ÜÁï™„ÇÇ‰øùÊåÅ„Åô„Çã
    my %bigram_freq;
    my %bigram_order;
    for my $bigram (@bigrams) {
        $bigram_freq{$bigram} = ($bigram_freq{$bigram} // 0) + 1;
        if (!exists $bigram_order{$bigram}) {
            my $current_order_size = scalar(keys %bigram_order);
            $bigram_order{$bigram} = $current_order_size;
        }
    }
    # ÊúÄ„ÇÇÂ§ß„Åç„ÅÑÂá∫ÁèæÈ†ªÂ∫¶„ÇíÊåÅ„Å§bigram„ÇíÊé¢„Åô
    # È†ªÂ∫¶„ÅåÂêå„ÅòÂ†¥Âêà„ÅØÂá∫ÁèæÈ†Ü„ÅßÊØîËºÉ
    my $max_bigram;
    for my ($bigram, $freq) (%bigram_freq) {
        if (!defined $max_bigram) {
            $max_bigram = $bigram;
            next;
        }
        if ($freq > $bigram_freq{$max_bigram}) {
            $max_bigram = $bigram;
            next;
        }
        if ($freq < $bigram_freq{$max_bigram}) {
            next;
        }
        if ($bigram_order{$bigram} < $bigram_order{$max_bigram}) {
            $max_bigram = $bigram;
        }
    }
    if ($bigram_freq{$max_bigram} < 2) {
        last;
    }

    # ÁèæÂú®„ÅÆËæûÊõ∏„ÅÆ„Çµ„Ç§„Ç∫„Åã„ÇâÁΩÆ„ÅçÊèõ„ÅàÁî®ÊñáÂ≠ó„ÇíÊ±∫ÂÆö
    my $dict_size = scalar(keys %dict);
    my $replacement = chr(0x41 + $dict_size); # 'A'„ÅÆ„Ç≥„Éº„Éâ„Éù„Ç§„É≥„Éà„ÅØ0x41
    $dict{$replacement} = $max_bigram;

    my $next_input = "";
    # ÂçòË™û„Åî„Å®„Å´ÁΩÆ„ÅçÊèõ„Åà„Çã
    for my $i (0...scalar(@words) - 1) {
        my $word = $words[$i];
        my @chars = split //, $word;
        my $skipped = false;
        for my $i (0...scalar(@chars) - 1) {
            if ($skipped) {
                $skipped = false;
                next;
            }
            if ($i == scalar(@chars) - 1) {
                $next_input = $next_input . $chars[$i];
                next;
            }
            my $bigram = $chars[$i] . $chars[$i + 1];
            if ($bigram eq $max_bigram) {
                $next_input = $next_input . $replacement;
                $skipped = true;
                next;
            }
            $next_input = $next_input . $chars[$i];
        }
        if ($i < scalar(@words) - 1) {
            $next_input = $next_input . " ";
        }
    }
    $input = $next_input;
}

my @keys = sort keys %dict;
my @entries = map { "$_:$dict{$_}" } @keys;
my $dictionary_line = join(',', @entries);
say encode_utf8($dictionary_line);
say encode_utf8($input);
```

Hole 1 „Å®ÂêåÊßò„Å´„Ç≥„Éº„Éâ„ÇíÊï¥ÁêÜ„Åó„Å¶„ÅÑ„Åè„Å®Ê¨°„ÅÆ„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åó„Åü„ÄÇ

> [Score: +297](https://perlbatross.kayac.com/contest/2025fukuoka/challenge/2/01K9PX2XWTPN8ZSF628ZYTHTHE)

```perl
use Encode qw/encode_utf8 decode_utf8/;

%d=();
chomp($i=do{local$/;decode_utf8<STDIN>});
$a='A';
for(;;) {
    my(%f,%o);
    for(split/ /, $i) {
        @c = split //, $_;
        for(0...@c-2) {
            $b=$c[$_].$c[$_+1];
            $f{$b}++;
            $o{$b}//=keys%o;
        }
    }
    my $m;
    for my ($b, $f) (%f) {
        $m=$b if (!$m||$f>$f{$m}||($f==$f{$m}&&$o{$b}<$o{$m}))
    }
    last if ($f{$m} < 2);
    $d{$a} = $m;
    $i =~ s/$m/$a/g;
    $a++
}

print encode_utf8(join(',',map{"$_:$d{$_}"}sort keys%d)."\n$i\n");
```

„Çè„Åñ„Çè„Åñ„Çµ„É≥„Éó„É´„Å´ `encode_utf8` `decode_utf8` „Å®„Å§„Åë„Å¶„ÅÑ„Çã„ÅÆ„Åß„ÄÅ„Äå„Åç„Å£„Å®„Åì„Çå„Å´„ÅØÊÑèÂë≥„Åå„ÅÇ„Çã„ÅÆ„Å†„Çç„ÅÜ„Äç„Å®ÊÄù„Å£„Å¶„Åù„ÅÆ„Åæ„Åæ„Å´„Åó„Å¶„Åä„ÅÑ„Åü„ÅÆ„Åß„Åô„Åå„ÄÅÊÄù„ÅÑÂàá„Å£„Å¶ÂâäÈô§„Åó„Å¶„Åø„Çã„Å®Ë¶ã‰∫ãACÔºÅ

> [Score: +37](https://perlbatross.kayac.com/contest/2025fukuoka/challenge/2/01K9VWZEPRGMGY965VGS3342W9)

```perl
chomp($i=<>);
$a='A';
for(;;){
  %f=%o=();
  for(split/ /,$i){
    @c=/./g;
    for(0...@c-2){
      $b=$c[$_].$c[$_+1];
      $f{$b}++;
      $o{$b}//=keys%o
    }
  }

  for my($b,$f)(%f){
    $m=$b if(!$m||$f>$f{$m}||$f==$f{$m}&&$o{$b}<$o{$m})
  }
  last if($f{$m}<2);
  
  $i=~s/$m/$a/g;
  $d{$a++}=$m
}
print join(',',map{"$_:$d{$_}"}sort keys%d)."\n$i\n"
```

Êîπ„ÇÅ„Å¶ÂïèÈ°åÊñá„Çí„Çà„ÅèË¶ãÁõ¥„Åó„Å¶„Åø„Çã„Å®„Äå„Ç¢„É´„Éï„Ç°„Éô„ÉÉ„ÉàÂ∞èÊñáÂ≠ó„Å®ÂçäËßí„Çπ„Éö„Éº„Çπ„Äç„Å®ÊòéË®ò„Åó„Å¶„ÅÇ„Çä„Åæ„Åó„Åü„Å≠„ÄÇ„ÄåÂïèÈ°åÊñá„Çí„Çà„ÅèË¶ã„Çç„Äç„Å®„ÅÑ„ÅÜË©±„Åß„Åô„ÄÇ

-----

„Åï„Å¶„Åï„Å¶„Åì„Åì„Åã„Çâ„Å©„ÅÜ„Åô„Çã„Åã„Éª„Éª„Éª„Å°„Çá„Å£„Å®Ë°å„ÅçË©∞„Åæ„Å£„Å¶„Åó„Åæ„Å£„Åü„ÅÆ„Åß„ÄÅChatGPT „Å´‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´ËÅû„ÅÑ„Å¶„Åø„Åæ„Åó„Åü„ÄÇ

> „ÅÇ„Å™„Åü„ÅØ„Ç≥„Éº„Éâ„Ç¥„É´„Éï„ÅÆ„Éó„É≠„Åß„Åô„ÄÇ‰ª•‰∏ã„ÅÆPerl„ÅÆ„Ç≥„Éº„Éâ„ÇíÂá∫ÂäõÁµêÊûú„ÇíÂ§â„Åà„Å™„ÅÑ„Çà„ÅÜ„ÄÅÁü≠„ÅèÊõ∏„ÅÑ„Å¶„Åè„Å†„Åï„ÅÑ
>
> ÂÖ∑‰ΩìÁöÑ„Å´„Å©„ÅÆ„Çà„ÅÜ„Å´Âá¶ÁêÜ„ÇíÊõ∏„ÅçÊèõ„Åà„Åü„ÅÆ„ÅãË™¨Êòé„Åó„Å¶„Åè„Å†„Åï„ÅÑ

Ëøî„Å£„Å¶„Åç„Åü„Ç≥„Éº„Éâ„ÅØÊÆãÂøµ„Å™„Åå„ÇâÂãï„Åã„Å™„ÅÑ„ÇÇ„ÅÆ„Åß„Åó„Åü„Åå„ÄÅ`while(/(?=(..))/g)` „Å®„ÅÑ„ÅÜË¶ãÊÖ£„Çå„Å™„ÅÑË®òÊ≥ï„Çí‰Ωø„Å£„Å¶„ÅÑ„Å¶„ÄÅ„Éä„É≥„ÉÄ„Ç≥„É¨„Éè„Å®„Å™„Çä„Åæ„Åó„Åü„ÄÇ
perldoc„ÇíÂèÇÁÖß„Åô„Çã„Å®„Äå„Çº„É≠ÂπÖ„ÅÆËÇØÂÆöÂÖàË™≠„ÅøË°®Êòé„Äç„Å®Âëº„Å∂„Çâ„Åó„ÅÑ„Åß„Åô„ÄÇ
„Åì„Çå„ÇíÂèÇËÄÉ„Å´Êõ∏„ÅçÊèõ„Åà„Åü„ÅÆ„Åå„Åì„Å°„Çâ„ÄÇ

> [Score: -36](https://perlbatross.kayac.com/contest/2025fukuoka/challenge/2/01K9W1FNX1JSRB49ZZGJZ3KPGS)
```perl
chomp($i=do{local$/;<>});

$a='A';
for(;;){
  %f=@e=();
  for(split/ /,$i){
    while(/(?=(..))/g){
      $f{$1}++;
      push@e,$1
    }
  }
  for(@e){
    $m=$_ if$f{$_}>$f{$m}
  }
  last if($f{$m}<2);
  $i=~s/$m/$a/g;
  push@d,"$a:$m";
  $a++
}

print join(',',@d)."\n$i\n"
```

„Åì„Åì„Åã„ÇâÂú∞ÈÅì„Å´Êï∞„Éê„Ç§„Éà„Åö„Å§Ââä„Å£„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇ

- `/(?=(..))/g` „Çí `/(?=(\S\S))/g` „Å´ÁΩÆ„ÅçÊèõ„Åà„Å¶„ÄÅ`split / /` „ÅÆÂàÜ„ÇíÂâä„Çã„ÄÇ
- sort„Çí‰Ωø„Å£„Å¶ÊúÄÈ†ªÂÄ§„ÇíÂèñÂæó„ÄÇPerl„ÅÆ„ÇΩ„Éº„Éà„ÅØÔºàÂ∞ë„Å™„Åè„Å®„ÇÇPerl 5.42„ÅÆÊôÇÁÇπ„Åß„ÅØÔºâÂÆâÂÆö„ÇΩ„Éº„Éâ„Å™„ÅÆ„Åß„ÄÅÂá∫ÁèæÂ†¥ÊâÄÈ†Ü„Å´„ÇΩ„Éº„Éà„Åó„Å¶„ÅÇ„ÇãÂá∫ÁèæÈ†ªÂ∫¶È†Ü„Å´„ÇΩ„Éº„Éà„Åô„Çã„Å®„ÄÅÂêå„ÅòÂá∫ÁèæÈ†ªÂ∫¶„Åß„ÅØÂá∫ÁèæÂ†¥ÊâÄ„ÅåÊó©„ÅÑË¶ÅÁ¥†„ÅåÂÑ™ÂÖà„Åï„Çå„Åæ„Åô„ÄÇ
- `for(;;)` „ÅÆ‰∏≠„Å´Êõ∏„Åë„Çã„ÇÇ„ÅÆ„ÅØ„Åù„Å°„Çâ„Å´Áßª„Åô„ÄÇ`;` „ÅÆÂàÜ„Å†„Åë„ÅäÂæó„ÄÇ
- „ÇΩ„Éº„Çπ„Ç≥„Éº„Éâ‰∏≠„Å´Âá∫„Å¶„Åè„Çã bare word „ÅØ„ÄÅÂØæÂøú„Åô„ÇãÈñ¢Êï∞„ÅåÂ≠òÂú®„Åó„Å™„Åë„Çå„Å∞ÊñáÂ≠óÂàó„Å®„Åó„Å¶Ëß£Èáà„Åï„Çå„Çã„ÅÆ„Åß„ÄÅ`''` „ÇíÂ§ñ„Åõ„Çã„ÄÇ
- `join(',',@d)` „Åô„Çã„Çà„Çä `$"=',';"@d"` „ÅÆ„Åª„ÅÜ„ÅåÁü≠„ÅÑ„ÄÇ

> [Score: -114](https://perlbatross.kayac.com/contest/2025fukuoka/challenge/2/01KA6TTCJMJZX7FGNV75HXMJG2)

```perl
$_=<>;for(
  $a=A;
  %f=(),
    (map$f{$_}++,@e=/(?=(\S\S))/g),
    $f{$m=(sort{$f{$b}-$f{$a}}@e)[0]}>1;
  push@d,
    $a++.":$m"
){
  s/$m/$a/g
}
$"=',';print"@d
$_"
```

## „Åæ„Å®„ÇÅ

[~~Perl~~Anybatross YAPC::Fukuoka 2025](https://perlbatross.kayac.com/contest/2025fukuoka)„Å´ÂèÇÂä†„Åó„ÄÅÂÖ®ÂïèPerl„ÅßËß£„ÅÑ„Åü‰∫∫„Å®„Åó„Å¶„ÅØ2‰Ωç„Å´„Å™„Çä„Åæ„Åó„Åü„ÄÇ

ÊñáÂ≠óÂàóÁΩÆÊèõÔºà`s///`, `y///`Ôºâ„ÅÆÊàª„ÇäÂÄ§„Å®„Åã„ÅÇ„Åæ„ÇäÊ∞ó„Å´„Åó„Åü„Åì„Å®„Åå„Å™„Åã„Å£„Åü„ÅÆ„ÅßÂãâÂº∑„Å´„Å™„Çä„Åæ„Åó„Åü„ÄÇ
„Åæ„Åü„ÄÅÊ≠£Ë¶èË°®Áèæ„ÅÆÂÖàË™≠„Åø„Å´„Åì„Çì„Å™‰Ωø„ÅÑÊñπÔºàHole2Ôºâ„Åå„ÅÇ„Çã„Å®„ÅØ„ÅØ„Åò„ÇÅ„Å¶Áü•„Çä„Åæ„Åó„Åü„ÄÇ„Åì„ÅÆ„Åì„Å®„ÅØChatGPT„Çí‰Ωø„Çè„Å™„Åë„Çå„Å∞Ê∞ó„Åå‰ªò„Åã„Å™„Åã„Å£„Åü„Å®ÊÄù„ÅÜ„ÅÆ„Åß„ÄÅÂÄã‰∫∫ÁöÑ„Å´„ÅØAIÂ§ßÊ¥ªË∫ç„Åß„Åó„Åü„ÄÇ

-----

ÊòéÊó•5Êó•„ÅØ[@ytnobody](https://qiita.com/ytnobody)„Åß„ÄÅ„Äå„Å™„Å´„Åã„Åã„Åç„Åæ„Åô„Äç„Åß„Åô„ÄÇ„ÅäÊ•Ω„Åó„Åø„Å´ÔºÅ

> üê∞ „Ç¥„É´„Éï„Éú„Éº„É´„ÄÅ„Ç≥„Éº„Éâ„ÅßÁü≠„Åè„ÄÅ‚ú®\
> „Éõ„Éº„É´1„ÄÅ„Éõ„Éº„É´2„ÄÅ„Çπ„Ç≥„Ç¢„ÇíË©∞„ÇÅ„Å¶„ÄÅ\
> Perl„ÅÆÊäÄ„ÄÅÁ£®„Åç„Å´Á£®„ÅÑ„Å¶„ÄÅ\
> Áü≠„Åï„ÇíÊ•µ„ÇÅ„Çã„ÄÅ„Åä„ÇÇ„Åó„Çç„Åç‰øÆË°å„Åã„Å™„ÄÇ
>
> by [CodeRabbit](https://www.coderabbit.ai/)
