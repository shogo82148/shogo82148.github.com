---
layout: post
title: "Goå‘ã‘ã®ULIDãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œã£ãŸ"
slug: ulid-for-golang
date: 2025-10-13 00:50:00 +0900
comments: true
categories: [go, golang]
---

## èƒŒæ™¯ãƒ»ç›®çš„

[ULID]ã‚’ä½¿ã£ã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’è¦‹ã‹ã‘ã¾ã—ãŸã€‚
Goè¨€èªã®ULIDå®Ÿè£…ã¯ [oklog/ulid] ãŒæœ‰åã§ã™ã€‚
è¦‹ã‹ã‘ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚‚ [oklog/ulid] ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã—ãŸã€‚

ã—ã‹ã—æœ€æ–°ç‰ˆ [oklog/ulid v2.1.1](https://github.com/oklog/ulid/tree/v2.1.1) ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§ã¿ã‚‹ã¨è‰²ã€…ã¨æ°—ã«ãªã‚‹å®Ÿè£…ãŒã‚ã‚Šã¾ã™ã€‚

ã¾ãšã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼æºãŒ [math/rand] ã§ã‚ã‚‹ã“ã¨ã€‚
[math/rand] ã¯æš—å·è«–çš„ã«å®‰å…¨ãªä¹±æ•°ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
éå»ã®æ¡ç•ªå±¥æ­´ã‹ã‚‰ã€æ¬¡ã«æ¡ç•ªã•ã‚Œã‚‹IDãŒäºˆæ¸¬ã•ã‚Œã¦ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ã•ã‚‰ã«ç–‘ä¼¼ä¹±æ•°ã®Seedã«ç¾åœ¨æ™‚åˆ»ï¼ˆ`time.Now().UnixNano()`ï¼‰ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ç‚¹ã€‚
1ç§’ã£ã¦10å„„ãƒŠãƒç§’ã—ã‹ãªã„ã®ã§ã€ãŸã¨ãˆã°1ç§’é–“ã«ç´„3ä¸‡ãƒ—ãƒ­ã‚»ã‚¹ãŒä¸€æ–‰ã«èµ·å‹•ã™ã‚‹ã‚ˆã†ãªå¤§è¦æ¨¡ã‚·ã‚¹ãƒ†ãƒ ã®å ´åˆã€[èª•ç”Ÿæ—¥ã®ãƒ‘ãƒ©ãƒ‰ãƒƒã‚¯ã‚¹] ã‹ã‚‰50%ã®ç¢ºç‡ã§SeedãŒè¡çªã—ã¾ã™ã€‚
æ„å¤–ã¨è¡çªç¢ºç‡é«˜ã„ã¨æ€ã„ã¾ã›ã‚“ã‹ï¼Ÿ
SeedãŒè¡çªã—ãŸã¨ã„ã†ã“ã¨ã¯ç”Ÿæˆã•ã‚Œã‚‹ä¹±æ•°åˆ—ã‚‚åŒã˜ãªã®ã§ã€ULIDãŒè¡çªã™ã‚‹ç¢ºç‡ã‚‚é«˜ããªã‚Šã¾ã™ã€‚

æœ€å¾Œã«ã€Base32ã«å«ã¾ã‚Œã¦ã„ãªã„æ–‡å­—ãŒå…¥åŠ›ã•ã‚ŒãŸå ´åˆã€`Parse` é–¢æ•°ã¯ã‚¨ãƒ©ãƒ¼ã‚’å ±å‘Šã—ãªã„ã¨ã„ã†ç‚¹ã€‚
ã“ã®å ´åˆã©ã®ã‚ˆã†ãªULIDãŒè¿”å´ã•ã‚Œã‚‹ã‹ã¯æœªå®šç¾©ã§ã™ã€‚

> Parse parses an encoded ULID, returning an error in case of failure. 
> ErrDataSize is returned if the len(ulid) is different from an encoded ULID's length. Invalid encodings produce undefined ULIDs. For a version that returns an error instead, see ParseStrict. 
> from https://pkg.go.dev/github.com/oklog/ulid/v2@v2.1.1#Parse

å¤–éƒ¨ã‹ã‚‰ã®å…¥åŠ›ã‚’å—ã‘ä»˜ã‘ã‚‹ã«ã¯å¿ƒã‚‚ã¨ãªã„æŒ™å‹•ã§ã™ã€‚

## å®Ÿè£…

ã“ã‚Œã‚‰ã®ç‚¹ãŒæ°—ã«ãªã£ãŸã®ã§ã€è»Šè¼ªã®å†ç™ºæ˜ã§ã™ãŒã€è‡ªåˆ†ã§ULIDã®å®Ÿè£…ã‚’ã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚

- [shogo82148/go-ulid](https://github.com/shogo82148/go-ulid)

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼æºã‚’ [crypto/rand] ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚
ã“ã‚Œãªã‚‰ULIDã®è¡çªç¢ºç‡ã‚’æœ€å°é™ã«æŠ‘ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

`Parse` é–¢æ•°ã¯ Base32ã«å«ã¾ã‚Œã¦ã„ãªã„æ–‡å­—ãŒå…¥åŠ›ã•ã‚ŒãŸå ´åˆã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

## ã¾ã¨ã‚

[oklog/ulid] ã«ã¡ã‚‡ã£ã¨æ°—ã«ãªã‚‹ç‚¹ãŒã‚ã£ãŸã®ã§ã€è‡ªåˆ†ã§ULIDã®å®Ÿè£…ã‚’ä½œã£ã¦ã¿ã¾ã—ãŸã€‚

- [shogo82148/go-ulid](https://github.com/shogo82148/go-ulid)

ã‚ˆã‚Šå®‰å…¨ã«ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã¨æ€ã£ã¦ã„ã‚‹ã®ã§ã€ãœã²ã”æ´»ç”¨ãã ã•ã„ã€‚

> ã´ã‚‡ã‚“ã¨è·³ã­ã¦æ›¸ã„ãŸè¨˜\
> æš—å·ã®é¢¨ã§ULIDã²ã¨ã¤\
> ä¹±æ•°ã¯éµã¨ãªã‚Šã¦èµ°ã‚‹ã‚ˆ\
> æ–‡å­—ãŒå¤–ã‚Œã‚Œã°ã™ãã«å±ã‚‹\
> ã«ã‚“ã˜ã‚“ã½ãã»ã»ãˆã‚€æœ ğŸ¥•
>
> by [CodeRabbit](https://www.coderabbit.ai/)

## å‚è€ƒ

- [shogo82148/go-ulid](https://github.com/shogo82148/go-ulid)
- [ULID]
- [oklog/ulid]
- [math/rand]
- [crypto/rand]
- [èª•ç”Ÿæ—¥ã®ãƒ‘ãƒ©ãƒ‰ãƒƒã‚¯ã‚¹]

[ULID]: https://github.com/ulid/spec
[oklog/ulid]: https://github.com/oklog/ulid
[math/rand]: https://pkg.go.dev/math/rand
[crypto/rand]: https://pkg.go.dev/crypto/rand
[èª•ç”Ÿæ—¥ã®ãƒ‘ãƒ©ãƒ‰ãƒƒã‚¯ã‚¹]: https://ja.wikipedia.org/wiki/%E8%AA%95%E7%94%9F%E6%97%A5%E3%81%AE%E3%83%91%E3%83%A9%E3%83%89%E3%83%83%E3%82%AF%E3%82%B9
