---
layout: post
title: "Perl 5.40ã«çœŸå½å€¤ã®æ’ä»–çš„è«–ç†å’Œã‚’è¡¨ã™æ–°ã—ã„æ¼”ç®—å­ãŒå°å…¥ã•ã‚Œã¾ã—ãŸ"
slug: perl-logical-xor-operator
date: 2024-12-05 21:24:00 +0900
comments: true
categories: [perl]
---

ã“ã®è¨˜äº‹ã¯ã€[Perl Advent Calendar 2024](https://qiita.com/advent-calendar/2024/perl) 5æ—¥ç›®ã®è¨˜äº‹ï¼ˆç©´åŸ‹ã‚ï¼‰ã§ã™ã€‚
4æ—¥ç›®ã¯[@shogo82148](https://twitter.com/shogo82148)ã§ã€Œ[Perl 5.40ã§try/catchæ©Ÿèƒ½ãŒå®‰å®šç‰ˆã«ãªã‚Šã¾ã—ãŸ](https://shogo82148.github.io/blog/2024/12/04/try-feature-is-no-longer-experimental/)ã€ã§ã—ãŸã€‚

-----

Perl 5.40.0 ã‹ã‚‰ã€çœŸå½å€¤ã®æ’ä»–çš„è«–ç†å’Œã‚’è¡¨ã™ `^^` æ¼”ç®—å­ãŒå°å…¥ã•ã‚Œã¾ã—ãŸã€‚

## èƒŒæ™¯

Perl ã«ã¯ã€Œ[ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆæ–‡è„ˆï¼‰](https://qiita.com/karupanerura/items/361b620a123d80ad9fbe)ã€ã¨å‘¼ã°ã‚Œã‚‹æ¦‚å¿µãŒã‚ã‚Šã¾ã™ã€‚
Perlã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ å†…ã®æ–‡è„ˆã«ã‚ˆã£ã¦ã€ä»Šæ‰±ã£ã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ã©ã‚“ãªç¨®é¡ï¼ˆæ•°å€¤ãªã®ã‹æ–‡å­—åˆ—ãªã®ã‹ï¼‰ã§è§£é‡ˆã™ã‚‹ã‹ã‚’æ±ºå®šã—ã¾ã™ã€‚

ãŸã¨ãˆã° `$x + $y` ã¯æ•°å€¤åŠ ç®—ã®æ¼”ç®—å­ã§ã‚ã‚Šã€`$x` ã‚„ `$y` ã¯æ•°å€¤ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§è§£é‡ˆã•ã‚Œã¾ã™ã€‚
æ•°å€¤ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ã¯ãƒ‡ãƒ¼ã‚¿ã¯æ•°å€¤ã¨ã—ã¦è©•ä¾¡ã•ã‚Œã¾ã™ã€‚
ã‚‚ã— `$x` ã‚„ `$y` ã«æ–‡å­—åˆ—ãŒå…¥ã£ã¦ã„ãŸå ´åˆã¯ã€ä¸€åº¦æ•°å€¤ã«å¤‰æ›ã—ã¦ã‹ã‚‰æ¼”ç®—ãŒè¡Œã‚ã‚Œã¾ã™ã€‚

ãã—ã¦ã€Perlã«ã¯ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ¯ã«ç•°ãªã£ãŸæ¼”ç®—å­ãŒå­˜åœ¨ã—ã¾ã™ã€‚
ãŸã¨ãˆã°ã€ã€Œè«–ç†ç©ã€ã‚’è¡¨ã™æ¼”ç®—å­ã®å ´åˆã€
ã€Œæ•´æ•°ã®è«–ç†ç©ã€ã€Œæ–‡å­—åˆ—ã®è«–ç†ç©ã€ã€ŒçœŸå½å€¤ã®è«–ç†ç©ï¼ˆå„ªå…ˆåº¦é«˜ï¼‰ã€ã€ŒçœŸå½å€¤ã®è«–ç†ç©ï¼ˆå„ªå…ˆåº¦ä½ï¼‰ã€ã®4ç¨®é¡ã®æ¼”ç®—å­ãŒã‚ã‚Šã¾ã™ã€‚
ã€Œè«–ç†å’Œã€ã‚„ã€Œæ’ä»–çš„è«–ç†å’Œã€ã‚’åŠ ãˆã¦è¡¨ã«ã¾ã¨ã‚ã¦ã¿ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

| ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ       | è«–ç†ç© | è«–ç†å’Œ | æ’ä»–çš„è«–ç†å’Œ  |
| ---------------- | ------ | ------ | ------------- |
| æ•°å€¤             | `&`    | `\|`   | `^`           |
| æ–‡å­—åˆ—           | `&.`   | `\|.`  | `^.`          |
| çœŸå½å€¤(å„ªå…ˆåº¦é«˜) | `&&`   | `\|\|` |        |
| çœŸå½å€¤(å„ªå…ˆåº¦ä½) | `and`  | `or`   | `xor`         |

ã•ã¦ã€ã“ã®è¡¨ã‚’ã‚ˆãè¦‹ã‚‹ã¨ã€ŒçœŸå½å€¤ã®æ’ä»–çš„è«–ç†å’Œã€ã®éƒ¨åˆ†ã«ã²ã¨ã¤ã ã‘ç©ºç™½ãŒã‚ã‚Šã¾ã™ã€‚
ã€Œã“ã®ç©ºç™½ã‚’åŸ‹ã‚ã‚ˆã†ï¼ã€ã¨ã„ã†ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã§è¿½åŠ ã•ã‚ŒãŸã®ãŒ `^^` æ¼”ç®—å­ã§ã™ã€‚
`^^` ã¯ä¸¡è¾ºã®çœŸå½å€¤ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§è©•ä¾¡ã—ã€ãã®æ’ä»–çš„è«–ç†å’Œã‚’è¨ˆç®—ã—ã¾ã™ã€‚

## è©¦ã—ã¦ã¿ãŸ

å®Ÿéš›ã«è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚

```perl
use v5.40;

sub say_bool($v) {
    say $v ? "true" : "false";
}

say_bool false ^^ false;
say_bool false ^^  true;
say_bool  true ^^ false;
say_bool  true ^^  true;
```

Perl 5.40 ã§å®Ÿè¡Œã—ã¦ã¿ã‚‹ã¨ã€çœŸç†å€¤è¡¨é€šã‚Šã®çµæœãŒå¾—ã‚‰ã‚Œã¾ã—ãŸã­ã€‚

```plain
false
true
true
false
```

## xoræ¼”ç®—å­ã¨ã®é•ã„ã¯ï¼Ÿ

`xor` æ¼”ç®—å­ã¨ `^^` æ¼”ç®—å­ã®é•ã„ã¯å„ªå…ˆé †ä½ã§ã™ã€‚

ãŸã¨ãˆã°ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯ `(say_bool false) xor false;` ã¨è§£é‡ˆã•ã‚Œã¦ã—ã¾ã£ã¦ã€
æœŸå¾…ã—ãŸã¨ãŠã‚Šã«ã¯å‹•ãã¾ã›ã‚“ã€‚

```perl
use v5.40;

sub say_bool($v) {
    say $v ? "true" : "false";
}

say_bool false xor false;
say_bool false xor  true;
say_bool  true xor false;
say_bool  true xor  true;
```

```plain
Useless use of logical xor in void context at xor-legacy.pl line 7.
Useless use of logical xor in void context at xor-legacy.pl line 8.
Useless use of logical xor in void context at xor-legacy.pl line 9.
Useless use of logical xor in void context at xor-legacy.pl line 10.
false
false
true
true
```

æ­£ã—ãå‹•ä½œã•ã›ã‚‹ã«ã¯ã‚«ãƒƒã‚³ã‚’è£œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```perl
use v5.40;

sub say_bool($v) {
    say $v ? "true" : "false";
}

say_bool(false xor false);
say_bool(false xor  true);
say_bool( true xor false);
say_bool( true xor  true);
```

## ã¾ã¨ã‚

Perl 5.40.0 ã‹ã‚‰ã€çœŸå½å€¤ã®æ’ä»–çš„è«–ç†å’Œã‚’è¡¨ã™ `^^` æ¼”ç®—å­ãŒå°å…¥ã•ã‚Œã¾ã—ãŸã€‚
`&&`, `||` ã®æ’ä»–çš„è«–ç†å’Œãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã€å„ªå…ˆåº¦ã®é«˜ã„ `xor` æ¼”ç®—å­ã¨ã—ã¦å‹•ä½œã—ã¾ã™ã€‚

> Perlã®ä¸–ç•Œã«æ–°ãŸãªå…‰ã€\
> XOR `^^`ãŒç™»å ´ã™ã‚‹ã‚ˆã€\
> è«–ç†ã¯æ˜ç¢ºã€æ—¥ã€…ã®é“ã€\
> ã‚³ãƒ¼ãƒ‰ã‚’ç°¡æ½”ã«ã™ã‚‹ãŸã‚ã®æ‰‹åŠ©ã‘ã€‚\
> ä¸€ã¤ã®çœŸå®Ÿã€äºŒã¤ã®å¿ƒã€\
> `^^`ã§ã‚³ãƒ¼ãƒ‰ã¯ãã‚Œã„ã«æ•´ã†ã€‚\
> ğŸ‡âœ¨
>
> by CodeRabbit


## å‚è€ƒ

- [Perlã¨å‹ã¨ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ](https://qiita.com/karupanerura/items/361b620a123d80ad9fbe)
- [New ^^ logical xor operator - perldelta v5.40.0](https://metacpan.org/release/HAARG/perl-5.40.0/view/pod/perldelta.pod#New-%5E%5E-logical-xor-operator)
- [New logical xor operator, spelled ^^ #21996](https://github.com/Perl/perl5/pull/21996)
- [perlop - perldoc.jp](https://perldoc.jp/docs/perl/5.40.0/perlop.pod)
