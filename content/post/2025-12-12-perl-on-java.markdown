---
layout: post
title: "PerlOnJavaã§éŠã‚“ã§ã¿ãŸ"
slug: perl-on-java
date: 2025-12-11 23:14:00 +0900
comments: true
categories: [perl]
---

## èƒŒæ™¯

ã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®ãƒã‚¿ã‚’æ¢ã—ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã®æµ·ã‚’å½·å¾¨ã£ã¦ã„ãŸã¨ã“ã‚ã€
[fglock/PerlOnJava](https://github.com/fglock/PerlOnJava)ã¨ã„ã†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚
ãªã‚“ã¨ã€Javaã§å®Ÿè£…ã•ã‚ŒãŸPerlã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ã§ã™ï¼ï¼
ã“ã‚Œã¯ç†±ã„ï¼ï¼ï¼

## è©¦ã—ã¦ã¿ãŸ

ä»Šã®ã¨ã“ã‚ãƒ“ãƒ«ãƒ‰æ¸ˆã¿ã®ãƒã‚¤ãƒŠãƒªãƒ¼ã¯æä¾›ã•ã‚Œã¦ã„ãªã„ã‚ˆã†ãªã®ã§ã€
è‡ªå‰ã§ãƒ“ãƒ«ãƒ‰ã—ã¦ã‚ã’ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

macOSä¸Šã§è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚
Javaã®é–‹ç™ºç’°å¢ƒãŒå¿…è¦ãªã®ã§ã€brewã‚’ä½¿ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãã¾ã™ã€‚

```bash
brew install gradle
PATH=$(brew --prefix openjdk)/bin:$PATH
```

ã‚ã¨ã¯cloneã—ã¦makeã—ã¦ã‚ã’ã‚‹ã ã‘ã§ã™ã€‚

```bash
git clone git@github.com:fglock/PerlOnJava.git
cd PerlOnJava
make
```

`jperl` ã¨ã„ã†ã‚¹ã‚¯ãƒªãƒ—ãƒˆçµŒç”±ã§Perlã‚’å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```bash
./jperl -E 'say "Hello World"'
```

ã†ã€å‹•ã„ãŸã‚ã‚ã‚ã‚ãƒ¼ãƒ¼ãƒ¼ãƒ¼ï¼ï¼ï¼ï¼

## ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯

JVMä¸Šã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã£ã¦ã€ã‚„ã¯ã‚Šæ€§èƒ½ãŒæ°—ã«ãªã‚Šã¾ã™ã‚ˆã­ã€‚
[ç«¹å†…é–¢æ•°](https://ja.wikipedia.org/wiki/%E7%AB%B9%E5%86%85%E9%96%A2%E6%95%B0) ã‚’ä½¿ã£ã¦ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å–ã£ã¦ã¿ã¾ã—ãŸã€‚

```perl
use v5.42;
use strict;
use warnings;
use Benchmark qw(timethis);

sub tarai($x, $y, $z)
{
    return $y if $x <= $y;
    tarai(  tarai($x-1, $y, $z),
            tarai($y-1, $z, $x),
            tarai($z-1, $x, $y));
}

timethis(10, sub { tarai(12, 6, 0) });
```

ã¾ãšã¯æ™®é€šã®Perlã‹ã‚‰ã€‚

```plain
timethis 10: 17 wallclock secs (17.15 usr +  0.04 sys = 17.19 CPU) @  0.58/s (n=10)
```

æ¬¡ã¯PerlOnJavaã€‚

```plain
timethis 10: 18 wallclock secs (18.22 usr +  0.12 sys = 18.33 CPU) @  0.55/s (n=10)
```

ç´„6.6% PerlOnJavaã®ã»ã†ãŒé…ã„ã¨ã„ã†çµæœã«ãªã‚Šã¾ã—ãŸã€‚
é…ã„ã¨ã¯ã„ãˆåƒ…å·®ã§ã™ã­ã€‚
ç°¡å˜ãªãƒã‚¤ã‚¯ãƒ­ãƒ™ãƒ³ãƒã—ã‹å–ã£ã¦ã„ã¾ã›ã‚“ãŒã€ã“ã®é€Ÿåº¦ãªã‚‰æ—¢å­˜ã®Perlã®ç½®ãæ›ãˆã¨ã—ã¦ä½¿ãˆã‚‹ã‹ã‚‚ãƒ»ãƒ»ãƒ»ï¼Ÿ

ã¨ã“ã‚ã§ã—ã‚Œã£ã¨ [Benchmark](https://metacpan.org/pod/Benchmark) ã‚’ä½¿ã£ã¦ã¿ãŸã®ã§ã™ãŒã€ãªã‚“ã‹æ™®é€šã«å‹•ãã¾ã—ãŸã€‚
äº’æ›æ€§ã®é«˜ã•ãŒã†ã‹ãŒãˆã¾ã™ã­ã€‚


## Perl 5.42 ã®æ–°æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ã¿ã‚‹

æœ€æ–°ç‰ˆã®[v5.42.2](https://github.com/fglock/PerlOnJava/releases/tag/v5.42.2)ã¯Perlã®5.42.0ã¨äº’æ›æ€§ãŒã‚ã‚‹ãã†ã§ã™ã€‚

ãã‚“ãªã‚ã‘ã§ã€Œ[Perl 5.42.0 ã® any ã¨ all ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’è©¦ã—ã¦ã¿ãŸ](https://shogo82148.github.io/blog/2025/12/11/any-and-all-keywords-in-perl/)ã€ã§è©¦ã—ãŸã‚³ãƒ¼ãƒ‰ã‚’PerlOnJavaã§å‹•ã‹ã—ã¦ã¿ãŸã¨ã“ã‚ã€è¦‹äº‹ã«å‹•ãã¾ã—ãŸã€‚

```perl
use v5.42;
use feature 'keyword_any';
no warnings 'experimental::keyword_any';

my @numbers = (2, 4, 8, 16);

if ( any { $_ % 2 == 0 } @numbers ) {
  say "Any of the numbers are even";
}
```

## ã¾ã¨ã‚

Javaã§å®Ÿè£…ã•ã‚ŒãŸPerlã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼[fglock/PerlOnJava](https://github.com/fglock/PerlOnJava)ã‚’è¦‹ã¤ã‘ãŸã®ã§éŠã‚“ã§ã¿ã¾ã—ãŸã€‚
é€Ÿåº¦ã‚‚ç”³ã—åˆ†ãªã„ã—ã€äº’æ›æ€§ã‚‚é«˜ãã†ã ã—ã€ã‹ãªã‚Šæœ‰æœ›ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã ã¨æ„Ÿã˜ã¾ã—ãŸã€‚
ã€Œperlã ã‘ãŒPerlã‚’è§£é‡ˆã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€ã¨ã‚ˆãè¨€ã‚ã‚Œã¾ã™ãŒã€ã“ã®çŠ¶æ³ã«ä¸€çŸ³ã‚’æŠ•ã˜ã‚‹ã¨ã“ã¯ã§ãã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚
ã“ã‚Œã‹ã‚‰ã®é€²åŒ–ãŒæ¥½ã—ã¿ã§ã™ã€‚


-----

> ğŸ° Javaã®ä¸Šã§è¸Šã‚‹Perlã‚’è¦‹ã¤ã‘ãŸã‚ˆã€\
> ãƒšãƒ¼ã‚¸ã«ç¶´ã‚Šã€æœéœ²ã®ã‚ˆã†ã«è¼ãã€‚\
> ã‚³ãƒãƒ³ãƒ‰å©ã„ã¦ã€ãƒ™ãƒ³ãƒèµ°ã‚‰ã›ã€\
> å°ã•ãªè¨³æ³¨ãŒæ—…ã‚’å°ãã€‚\
> ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ç•‘ã«ã€ã¾ãŸä¸€ç²’ã®çŸ¥è­˜ã‚’ã€‚
>
> by [CodeRabbit](https://www.coderabbit.ai/)


## å‚è€ƒ

- [fglock/PerlOnJava](https://github.com/fglock/PerlOnJava)
- [ç«¹å†…é–¢æ•°](https://ja.wikipedia.org/wiki/%E7%AB%B9%E5%86%85%E9%96%A2%E6%95%B0)
