<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=BIZ+UDPGothic:wght@400;700&family=Noto+Sans+Mono&display=swap" rel="stylesheet"> 

  
  <title>Twitterの二次元コード問題と、QRコード・フレームQRの見分け方</title>

  
  
  <link rel="stylesheet" href="/css/hugo-octopress.css">

  
  
    <link rel="stylesheet" href="https://shogo82148.github.io/css/syntax.css">
  

  
  <link href="https://shogo82148.github.io/favicon.png" rel="icon">

  
  

  <meta name="description" content="" />
  <meta name="keywords" content="">
  <meta name="author" content="ICHINOSE Shogo">

  
  <meta name="generator" content="Hugo 0.91.2" />

  
  
  


<script async src="https://www.googletagmanager.com/gtag/js?id=G-40R0PCLKVF"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-40R0PCLKVF');
</script>

  
  
</head>
<body>


<header role="banner">
<hgroup>
  
  <h1><a href="https://shogo82148.github.io/">Shogo&#39;s Blog</a></h1>
  <h2></h2>
</hgroup>
</header>


<nav role="navigation">
<fieldset class="mobile-nav">
  
  <select onchange="location = this.value;">
    <option value="">Navigate…</option>
      
  </select>
</fieldset>


<ul class="main-navigation">
  
  
</ul>

<ul class="subscription">
  
</ul>


  <form action="https://www.google.com/search" method="get" target="_blank">
    <fieldset role="search">
      <input class="search" type="text" name="q" results="0" placeholder="Search"/>
      <input type="hidden" name="q" value="site:https://shogo82148.github.io/" />
    </fieldset>
  </form>

</nav>


<div id="main">
  <div id="content">
    <div>
      <article class="hentry" role="article">

        
        

<header>
  <p class="meta">Nov 23, 2016
     - 1 minute read 
     - <a href="https://shogo82148.github.io/blog/2016/11/23/qr-code/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://shogo82148.github.io/categories/qrcode/">qrcode </a>
    
  </p>
  <h1 class="entry-title">
     Twitterの二次元コード問題と、QRコード・フレームQRの見分け方 
  </h1>
</header>


        <div class="entry-content">
          
          
          
          
          <p>先日Twitterの公式アプリがQRコード®
(<a href="https://blog.twitter.com/ja/2016/1117qrcode">お店やお友達を簡単にフォローするために</a>)
の作成と読み取りに対応しました。
しかし、生成されるQRコードが標準規格に準拠していないため、
「他のリーダーで読めない」「法的に問題があるのでは？」等々の指摘が出ていました。
人事ながらTwitterさんのことが心配になったので少し調べてみました。</p>
<p>なお、僕は法律の専門家ではないため、本記事の正確性は保証できません。
あくまで個人的な見解なので、
実際にQRコード®を使用するさいは各自の判断でお願いします。</p>
<!-- More -->
<h2 id="指摘ツイート">指摘ツイート</h2>
<blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">Twitterが生成するQRコード、規格(JIS X 0510・ISO/IEC 18004)を大幅に逸脱しているので「QRコード®」を名乗ること自体に法的なリスクがある。</p>&mdash; 祥太(4/15レイフレ18 C19+20) (@shota_) <a href="https://twitter.com/shota_/status/799066842694197248?ref_src=twsrc%5Etfw">2016年11月17日</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<blockquote class="twitter-tweet" data-conversation="none" data-lang="ja"><p lang="ja" dir="ltr">「デンソーウェーブは、JIS、ISOの規格に沿ったQRコードに限っては特許権を行使しませんが、規格を逸脱したQRコードについてはこの限りではございませんので、特許権を行使させていただくこともございます。」<br><br>(出典: <a href="https://t.co/SKXgBGSb8E">https://t.co/SKXgBGSb8E</a> )</p>&mdash; 祥太(4/15レイフレ18 C19+20) (@shota_) <a href="https://twitter.com/shota_/status/799066960466034689?ref_src=twsrc%5Etfw">2016年11月17日</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<blockquote class="twitter-tweet" data-conversation="none" data-lang="ja"><p lang="ja" dir="ltr">明暗暗転で読み取らないという話を多数見かけますけど、そちらについては「ISO/IEC 18004からは逸脱」「JIS X 0510には準拠」(規格票7.3.8参照)という微妙な状況なのです。多分ISOには準拠しているのでアプリは悪くないと思います。</p>&mdash; 祥太(4/15レイフレ18 C19+20) (@shota_) <a href="https://twitter.com/shota_/status/799104490095808512?ref_src=twsrc%5Etfw">2016年11月17日</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>たしかに <a href="http://www.qrcode.com/faq.html">qrcode.comのFAQ</a>には
特許について以下の記述があります。</p>
<blockquote>
<p>色を付けたりイラストを入れるような使い方をしても問題ありませんか？
(中略)
また、QRコードにイラストを重ねたりデザインを乗せるということは、QRコードの規格から外れ「QRコードではないもの」となってしまう可能性がございます。
デンソーウェーブは、JIS、ISOの規格に沿ったQRコードに限っては特許権を行使しませんが、規格を逸脱したQRコードについてはこの限りではございませんので、特許権を行使させていただくこともございます。</p>
</blockquote>
<p><strong>2022-06-05追記</strong>: 改めて<a href="http://www.qrcode.com/faq.html">qrcode.comのFAQ</a>を確認したところ、以下のように文言が変更されていました。</p>
<blockquote>
<p>色を付けたりイラストを入れるような使い方をしても問題ありませんか？
QRコードにイラストを重ねたり、デザインをのせて変形してしまうと、ちょっとした汚れや欠けでも読み取りが出来なくなったり、読み取りの反応が悪くなってしまうことがありますので推奨しておりません。
安定した読み取りという面から、JIS、ISOの規格で制定されている内容に従ってご利用いただくことを推奨しております。</p>
<p>なおイラストやデザインを施すような使い方をご希望の場合は、デンソーウェーブのフレームQR®をご利用ください。</p>
</blockquote>
<p>特許権の行使についての文言が削除されています。
2017年1月28日で特許権が有効期限切れになり、デンソーウェーブが特許権を行使することができなくなったからだと思います。
このことから特許についてはクリアになったと言えるでしょう。</p>
<p>とはいえFAQにあるとおり、読み取り性能の観点からイラストを入れるのは非推奨、という点は変わりありません。</p>
<p>追記ここまで</p>
<h2 id="問題点">問題点</h2>
<p>公式アプリの生成する二次元コードは以下のような問題があります。</p>
<ul>
<li>データパターンの20%近くがアイコンで上書きされている</li>
<li>「アライメントパターン」がTwitterのロゴで欠けている</li>
<li>明暗暗転している(一応JISには沿っているらしい)</li>
</ul>
<p>法的リスク以前に、
読み取り性能/互換性が劣化するので使わない方が無難でしょう。</p>
<p>自分のプロフィールのURL
(僕の場合は <a href="https://twitter.com/shogo82148">https://twitter.com/shogo82148</a> )を
QRコードに変換すれば公式アプリのリーダーでも読めるので、
こちらの方がオススメです。</p>
<p><img src="http://chart.apis.google.com/chart?cht=qr&amp;chs=130x130&amp;chl=https://twitter.com/shogo82148" alt="僕のQRコード"></p>
<h2 id="qrコード関連の権利">QRコード関連の権利</h2>
<h3 id="特許">特許</h3>
<p>QRコード®のJIS規格JIS X 0510には、
関連する特許として特許第2938338号「二次元コード」があげられています。
ただし、特許の保護期間は20年なので、1994年に出願されたこの特許は2014年で消滅しています。
したがってこの特許を理由に訴えられることはなさそうです。</p>
<p>ところがQRコードには実はモデル1とモデル2の二種類があり、
モデル2に関しては特許第3716527号「２次元コードおよび２次元コードの読取方法」が
該当しそうです。
この特許は「アライメントパターン」という特殊なパターンを二次元コードに埋め込んで、
大きなコードや曲面に印刷されたコードも読み取れるようにするというものです。
こちらは2017年1月28日までが保護期間で、この記事を書いている時点ではまだ保護期間内です。</p>
<p>Twitter公式アプリの二次元コードはモデル2にが該当するので、
この特許を理由に訴えられる可能性は依然としてありそうです。
ただし、期限が切れる2017年1月29日以降であれば、堂々と規格違反のQRコードを作れるはず(?)
(繰り返しになりますが、僕が関連特許を見落としている可能性もあるので、実際の使用は各自の判断で)</p>
<h3 id="商標">商標</h3>
<p>商標にも保護期限ってあるのかなあと調べてみたところ、
10年の期限はあるものの上限なく延長できるそうです。
したがって、QRコード®でないものをQRコード®として公開するのはまずそうです。</p>
<p>なお、作った二次元コード自体は商標ではないので、
公式アプリで作ったコードを利用するだけであれば何も問題はないはずです。
ユーザが訴えられる可能性はほとんどないのでご安心を。</p>
<h2 id="フレームqrについて">フレームQRについて</h2>
<p>QRコード®も進化していて、今はフレームQR®というものがあり、
コードの中に画像を埋め込めるそうです。</p>
<ul>
<li><a href="https://twitter.com/awKaoru/status/799074365572644865">https://twitter.com/awKaoru/status/799074365572644865</a></li>
</ul>
<p>ググって調べてみたところ、これには特許第5057560号「プログラム、情報記憶媒体、２次元コード、印刷物、２次元コード画像、２次元コード画像の表示制御方法、２次元コード生成システム」
が関連していそうです。
この特許、出願人がQRコード®の開発元であるデンソーウェーブではなく、
株式会社バンダイナムコエンターテインメントなんですよね。
QRコード®が比較的オープンなのに対してフレームQR®関連の資料がないのは
この辺が関連しているのでしょうか・・・。</p>
<h3 id="qrコードとフレームqr見分け方">QRコードとフレームQR見分け方</h3>
<p>さて気になるのは、Twitterの二次元コードがフレームQR®に該当するか、ですよね。</p>
<blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">QRフレームと違うらいいけどそもそもQRフレームの定義がわからないせいで違いがわからない・・・  自由に使えるキャンパス領域に描いてるように見えるような気もするんだけど</p>&mdash; 桜花 (@rofi) <a href="https://twitter.com/rofi/status/799088728035598336?ref_src=twsrc%5Etfw">2016年11月17日</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>結論から言うと、<strong>QRコード®とフレームQR®は別物</strong> であり、
<strong>Twitterの二次元コードはフレームQR®ではありません</strong>。</p>
<p>具体的な見分け方ですが、QRコード®に特徴的な「位置検出パターン」「タイミングパターン」「アライメントパターン」は
フレームQR®にもあるため、「型式情報」を頑張って読み取るしかないようです。
「型式情報」は<a href="https://ja.wikipedia.org/wiki/BCH%E7%AC%A6%E5%8F%B7">BCH符号</a>で符号化されているため、
人間が手動で復号するのは少し大変です。
「型式情報」はたったの32パターンしかないので、
<strong>すべてのパターンを覚えるのが一番楽</strong> な方法です。
というわけで、パターン一覧を作ってみました。</p>
<ul>
<li><a href="/images/2016-11-23-qrlist.svg">パターン一覧</a></li>
<li><a href="https://gist.github.com/shogo82148/07018ddad8f001e149a5aa34b0dff2c4">生成プログラム</a></li>
</ul>
<p>QRコード®やフレームQR®には「位置検出パターン」と呼ばれる「回」のようなパターンが3つあります。
このうち左上のパターンの周りに「型式情報」があります
(本当は冗長性のために他の2つの位置検出パターンの周りにもあるけど、左上のが一番みやすい)。
先ほどの<a href="/images/2016-11-23-qrlist.svg">パターン一覧</a>から一番近いものを探しましょう。
各行の一番左を手掛かりにすると探しやすいです。
その隣に「QRコード®モデル1」「QRコード®モデル2」「フレームQR®」に並んでいます。
以下は僕のコードを調べてみたときの例です。</p>
<p><img src="/images/2016-11-23-sample.svg" alt="解析例"></p>
<p><strong>さあ、これで君もQRコードーリーダーになれる！！</strong></p>
<h2 id="まとめ">まとめ</h2>
<ul>
<li>Twitterの二次元コードはQRコード®でもフレームQR®でもない</li>
<li>やっぱり法的リスクはありそう(な気がする)
<ul>
<li>少なくとも2017年1月28日までは特許権を理由に訴えられる可能性あり</li>
<li>QRコード®の商標を使っているのは危なそう</li>
</ul>
</li>
<li>ユーザに対しての法的リスクはないので、公式アプリの二次元コードの利用はご自由に
<ul>
<li>でも、法的に問題なくても、規格違反なので使わない方が無難</li>
</ul>
</li>
</ul>
<h2 id="参考">参考</h2>
<ul>
<li>JIS X 0510 二次元コードシンボル―ＱＲコード―基本仕様</li>
<li>特許第2938338号「二次元コード」</li>
<li>特許第3716527号「２次元コードおよび２次元コードの読取方法」</li>
<li>特許第5057560号「プログラム、情報記憶媒体、２次元コード、印刷物、２次元コード画像、２次元コード画像の表示制御方法、２次元コード生成システム」</li>
</ul>
<p>QRコード®およびフレームQR®は<a href="http://www.denso-wave.com/">(株)デンソーウェーブ</a>の登録商標です</p>

        </div>
        

<footer>
  <p class="meta">
    <span class="byline author vcard">Posted by <span class="fn">ICHINOSE Shogo</span></span>
    
    <time>Nov 23, 2016</time>
    
    </span>
  </p>

  

  <p class="meta">
    
        <a class="basic-alignment left" href="https://shogo82148.github.io/blog/2016/06/10/github-page-supports-https/" title="GitHub Pagesがhttpsをサポートしたので切り替えてみた">GitHub Pagesがhttpsをサポートしたので切り替えてみた</a>
    

    
      <a class="basic-alignment right" href="https://shogo82148.github.io/blog/2016/12/15/leap-second-in-datetime-dot-pm/" title="DateTime.pmにうるう秒の修正が入った話">DateTime.pmにうるう秒の修正が入った話</a>
    
  </p>
  
    
      <div id="disqus_thread"></div>
<script type="text/javascript">
  (function() {
      
      
      
      if (window.location.hostname == "localhost")
          return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'shogosblog';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    
  
</footer>

      </article>
    </div>
    

<aside class="sidebar thirds">
  <section class="first odd">

    

    <p>
      
    </p>
  </section>



  
  <ul class="sidebar-nav">
    <li class="sidebar-nav-item">
      <a target="_blank" href="https://github.com/shogo82148/" title="https://github.com/shogo82148/"><i class="fa fa-github fa-3x"></i></a>
      
      
      <a target="_blank" href="https://twitter.com/shogo82148/" title="https://twitter.com/shogo82148/"><i class="fa fa-twitter fa-3x"></i></a>
      
         
      
      
      
      
      
      
      
      

    
    
    </li>
  </ul>

  

  

  
  
  
    
      <section class="even">
        <h1>Recent Posts</h1>
        <ul id="recent_posts">
          
          
            
              <li class="post">
                <a href="/blog/2023/08/12/2023-08-12-eytzinger-layout/">Eytzinger LayoutをGoで試してみた</a>
              </li>
            
          
            
          
            
              <li class="post">
                <a href="/blog/2023/08/09/2023-08-09-p5-aws-lambda-supports-response-streaming/">AWS::LambdaがResponse Streamingに対応しました</a>
              </li>
            
          
            
              <li class="post">
                <a href="/blog/2023/08/04/2023-08-04-context-for-slog/">Contextに埋め込んだ値をログに出力してくれるログハンドラーを書いた</a>
              </li>
            
          
            
              <li class="post">
                <a href="/blog/2023/08/01/2023-08-01-p5-aws-lambda-0.1.1-are-released/">AWS::Lambda 0.1.1リリースのお知らせ</a>
              </li>
            
          
            
              <li class="post">
                <a href="/blog/2023/07/26/2023-07-26-base64dq-base64-variant-inspired-by-dragon-quest/">「ふっかつのじゅもん」みたいなBase64亜種「base64dq」を書いた</a>
              </li>
            
          
            
              <li class="post">
                <a href="/blog/2023/07/05/2023-07-05-github-used-by-counter/">GitHubのプロジェクトにUsed by counterを追加する</a>
              </li>
            
          
            
              <li class="post">
                <a href="/blog/2023/07/05/2023-07-05-actions-go-fuzz/">GitHub Actions上でFuzzingを実行するアクションを書いた</a>
              </li>
            
          
            
              <li class="post">
                <a href="/blog/2023/07/04/2023-07-04-access-google-cloud-from-github-actions-using-workload-identity/">GitHub ActionsからWorkload Identityを使ってGCPにアクセスする</a>
              </li>
            
          
            
              <li class="post">
                <a href="/blog/2023/07/02/2023-07-02-update-aws-sdk-v2-with-grouped-version-updates-for-dependabot/">dependabotの更新グループ化機能を使ってAWS SDK for Go v2をアップデートする</a>
              </li>
            
          
        </ul>
      </section>
    
  
</aside>

  </div>
</div>

<footer role="contentinfo">
  <p>Copyright &copy; 2023 ICHINOSE Shogo - <a
      href="https://shogo82148.github.io/license/">License</a> -
    <span class="credit">Powered by <a target="_blank" href="https://gohugo.io">Hugo</a> and <a target="_blank"
        href="https://github.com/parsiya/hugo-octopress/">Hugo-Octopress</a> theme.
  </p>
</footer>










<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$']],
    displayMath: [['$$','$$']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
})
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Queue(function() {
  // Fix <code> tags after MathJax finishes running. This is a
  // hack to overcome a shortcoming of Markdown. Discussion at
  // https://github.com/mojombo/jekyll/issues/199
  let all = MathJax.Hub.getAllJax()
  for(let o of all) {
      o.SourceElement().parentNode.className += ' has-jax'
  }
})
</script>

<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>



<script>
  var _gaq = [['_setAccount', 'UA-4526627-4'], ['_trackPageview']];
  (function (d, t) {
    var g = d.createElement(t), s = d.getElementsByTagName(t)[0];
    g.src = ('https:' == location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g, s)
  }(document, 'script'));
</script>

</body>

</html>

