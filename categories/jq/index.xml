<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>jq on Shogo&#39;s Blog</title>
    <link>https://shogo82148.github.io/categories/jq/</link>
    <description>Recent content in jq on Shogo&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja-jp</language>
    <lastBuildDate>Mon, 25 Apr 2022 20:28:00 +0900</lastBuildDate><atom:link href="https://shogo82148.github.io/categories/jq/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>jq の引数を省略したときの挙動が違う件</title>
      <link>https://shogo82148.github.io/blog/2022/04/25/2022-04-25-jq-program/</link>
      <pubDate>Mon, 25 Apr 2022 20:28:00 +0900</pubDate>
      
      <guid>https://shogo82148.github.io/blog/2022/04/25/2022-04-25-jq-program/</guid>
      <description>JSONを加工するときに jq は必須の存在になりました。 jqハンドブック なんてものが発売されるくらいですからね。
そんな jq なんですが、@Gaku07jp が AWS CloudShell 上で 期待どおりに動かない、と困ってました。 なんでこんな挙動になるのかなーと気になったので、調査してみたメモです。
症状 問題となったのはこんな感じのシェルスクリプトです。
FOO=$(echo &amp;#39;{}&amp;#39; | jq) 普段開発で使用している macOS 上では FOO={} と展開されるのですが、 CloudShell 上では jq のヘルプメッセージが表示されます (2022-04-25現在)。
# CloudShell 上 $ FOO=$(echo &amp;#39;{}&amp;#39; | jq) jq - commandline JSON processor [version 1.5] Usage: jq [options] &amp;lt;jq filter&amp;gt; [file...] (...snip...) 原因 直接の原因は引数を省略してしまったことです。 jq の第一引数には jq の式が必要です。単に整形したい場合は jq . とすればOKです。
FOO=$(echo &amp;#39;{}&amp;#39; | jq .) macOS と CloudShell の違い スクリプトが動かない直接の原因はわかったものの、同じ jq なのに、なぜこのような違いが生まれるのか気になりますよね？ というわけでソースコードを追ってみました。</description>
    </item>
    
  </channel>
</rss>
