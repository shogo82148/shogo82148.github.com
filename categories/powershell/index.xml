<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>powershell on Shogo&#39;s Blog</title>
    <link>https://shogo82148.github.io/categories/powershell/</link>
    <description>Recent content in powershell on Shogo&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja-jp</language>
    <lastBuildDate>Thu, 30 Dec 2021 21:12:00 +0900</lastBuildDate><atom:link href="https://shogo82148.github.io/categories/powershell/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Bash と PowerShell の Polyglot を作る</title>
      <link>https://shogo82148.github.io/blog/2021/12/30/polyglot-of-bash-and-powershell/</link>
      <pubDate>Thu, 30 Dec 2021 21:12:00 +0900</pubDate>
      
      <guid>https://shogo82148.github.io/blog/2021/12/30/polyglot-of-bash-and-powershell/</guid>
      <description>以前 Bash と PowerShell の Polyglot を書いたことがあったんですが、 「そういえば、どこにもメモってないな〜」と思い出したので、記録として残しておきます。
背景・目的 GitHub Actions には run というステップがあります。 任意のシェルスクリプトをかける便利なステップなんですが、 マトリックスビルドでマルチプラットフォームなワークフローを書いていると罠があります。
例えば以下のワークフローは 「Hello GitHub Actions!」とログに表示するだけの簡単なものです。
on:push:pull_request:jobs:job:strategy:fail-fast:falsematrix:os:[ubuntu-latest, windows-latest, macos-latest]runs-on:${{ matrix.os }}steps:- name:Ubuntu, macOS, Windows で実行する# shell: bash # Ubuntu, macOS でのデフォルト# shell: pwsh # Windows でのデフォルトrun:|echo &amp;#34;Hello GitHub Actions!&amp;#34;コメントに書いたとおり Ubuntu, macOS では bash、Windows では PowerShell Core と デフォルトのシェルが環境によって異なります。 bash にも PowerShell にも echo コマンドが存在するので、この例はなぜか動いてしまうのですが、 もっと複雑な処理ではこうも行きません。
これを一般化すると なるほど！ Bash と PowerShell の Polyglot だ！ と気がついたので、やってみたというお話です。
最終案 気の短い人のための最終案。 試行錯誤の末たどり着いたのが以下のスクリプトです。</description>
    </item>
    
  </channel>
</rss>
